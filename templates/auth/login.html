{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title_ext %} - Sign In{% endblock %}

{% block content %}
<div class="container d-flex align-items-center justify-content-center min-vh-100">
  <div class="col-md-6 col-lg-5">
    
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
    
    <div class="card shadow rounded-4">
      <div class="card-header text-center">
        <h3 class="mb-0">Sign In</h3>
      </div>
      <div class="card-body">
        <form method="POST" novalidate>
          {% csrf_token %}

          <div class="mb-3">
            <label for="id_username" class="form-label">Username</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-user"></i></span>
              <input type="text" name="username" id="id_username" class="form-control" required autofocus>
            </div>
          </div>

          <div class="mb-3">
            <label for="id_password" class="form-label">Password</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-key"></i></span>
              <input type="password" name="password" id="id_password" class="form-control" required>
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center">
            <a href="/password-reset/" class="small">Forgot password?</a>
            <button type="submit" class="btn btn-warning px-4">Login</button>
          </div>
        </form>

        <div class="text-center mt-4">
          <small>Or sign in as a citizen using</small>
          <div class="d-flex justify-content-center mt-2">
            <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#privacyModal">
              <i class="fab fa-google me-1"></i> Google
            </button>
          </div>
        </div>
      </div>
      <div class="card-footer text-center">
        <small>Need an account? <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Register with Google</a></small>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Privacy Policy -->
<div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="privacyModalLabel">Privacy Policy and Terms</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h6>Privacy Policy</h6>
        <p>Your privacy is important to us. When you sign up for our app, we will only use your Google account information to create and manage your account. We do not collect any additional personal information without your consent.</p>
        <p>Your Google account information will be used solely for authentication purposes and to provide you with access to our services. We will not share your information with third parties without your explicit consent.</p>
        <p>We implement appropriate security measures to protect your information from unauthorized access, alteration, disclosure, or destruction.</p>
        <p>If you have any questions about this Privacy Policy, please contact us at <b><a href="mailto:bocauebyteppy@gmail.com">bocauebyteppy@gmail.com</a></b>.</p>

        <hr>

        <h6>Terms of Service</h6>
        <p>By using our app, you agree to comply with our Terms of Service. You must not use the app for any illegal or unauthorized purpose.</p>
        <p>We reserve the right to modify or terminate the service for any reason, without notice at any time. We may also change our Terms of Service from time to time, and we will notify you of any changes by posting the new terms on this page.</p>
        <p>If you have any questions about our Terms of Service, please contact us at <b><a href="mailto:bocauebyteppy@gmail.com">bocauebyteppy@gmail.com</a></b>.</p>
      </div>
      <div class="modal-footer d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <a href="/accounts/google/login/?process=login" class="btn btn-danger">
          <i class="fab fa-google me-1"></i> Continue with Google
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
