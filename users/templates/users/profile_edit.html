{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}

<div class="container col-4" style="padding-top: 1em">
  <!-- FORM STARTS HERE -->
  <form method="POST" enctype="multipart/form-data"> 
    {% csrf_token %} 
    
    <fieldset class="form-group">
      <legend class="border-bottom mb-1">Edit your Profile Info</legend>
      <small><i>Fields with * are required.</i></small>
      {{ u_form.non_field_errors }}  <!-- Display non-field errors for u_form -->
      {{ p_form.non_field_errors }}  <!-- Display non-field errors for p_form -->
      {% for field in u_form %}
          <p>
          {% for error in field.errors %}
          <p style="color: red">{{ error }}</p>
          {% endfor %}
          </p>
      {% endfor %}
      {{ u_form.media }}
      {{ u_form.as_p }}
      
      {% for field in p_form %}
          <p>
          {% for error in field.errors %}
          <p style="color: red">{{ error }}</p>
          {% endfor %}
          </p>
      {% endfor %}
      {{ p_form.media }}
      {{ p_form.as_p }}
    </fieldset>

    <div class="form-group">
      <button class="btn btn-outline-success p-2 mb-2" type="submit">
        Save changes
      </button>
    </div>
  </form>
</div>


{% endblock %}



<!-- old fieldset -->

<div class="container col-4" style="padding-top: 1em">
  <!-- FORM STARTS HERE -->
  <form method="POST" enctype="multipart/form-data"> <!-- enctype="multipart/form-data" IS IMPORTANT for the image to save -->
    
    {% csrf_token %} <!-- this is a required line for added security -->
    

    <fieldset class="form-group">
      <legend class="border-bottom mb-1">Edit your Profile Info</legend>
      <small><i>Fields with * are required.</i></small>
      {{ u_form.errors }}  <!-- Display form-wide errors for u_form -->
      {{ p_form.errors }}  <!-- Display form-wide errors for p_form -->

      {% for field in u_form %}
          <p>
          {% for error in field.errors %}
          <p style="color: red">{{ error }}</p>
          {% endfor %}
          </p>
      {% endfor %}
      {{ form.media }}
      {{ u_form.as_p }}
      {{ p_form.as_p }}
    </fieldset>

    <div class="form-group">
      <button class="btn btn-outline-success p-2 mb-2" type="submit">
        Save changes
      </button>
    </div>
  </form>
</div>