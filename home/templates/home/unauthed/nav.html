<style type="text/css">
  /* logo */
  .navbar-nav a .nav-item {
    transition: transform 0.3s ease; /* Slightly enlarge to 110% */
  }
  .navbar-nav a .nav-item:hover {
    transform: scale(1.2); /* Slightly enlarge to 110% */
  }

  /* other navbar links */
  .navbar-nav .nav-item a {
    position: relative; /* Position relative to allow absolute positioning of the underline */
    text-decoration: none; /* Remove default underline */
    transition: transform 0.3s ease; /* Smooth transition for transform */
  }
  
  .navbar-nav .nav-item a:hover {
    transform: scale(1.1); /* Slightly enlarge to 110% */
  }

  .navbar-nav .nav-item a::after {
    content: ""; /* Create a pseudo-element for the underline */
    position: absolute; /* Position it absolutely */
    left: 0; /* Align to the left */
    right: 0; /* Align to the right */
    bottom: 0; /* Align to the bottom */
    height: 2px; /* Height of the underline */
    background-color: rgba(0, 0, 0, 0.5); /* Color of the underline */
    transform: scaleX(0); /* Initially scale to 0 (hidden) */
    transition: transform 0.3s ease; /* Smooth transition for the underline */
  }
  
  .navbar-nav .nav-item a:hover::after {
    transform: scaleX(1); /* Scale to full width on hover */
  }
  
  .navbar-nav .nav-item i {
    transition: transform 0.3s ease; 
  }
  
  .navbar-nav .nav-item i:hover {
    transform: scale(1.1); /* Enlarge icon on hover */
  }
</style>

<!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light text-sm">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <!-- Home -->
      <a href="/" class="nav-link" title="Home">
          <!-- Brand Logo -->
          <img src="/media/defaults/jjv.png" alt="LMS Logo" class=""
               style="height: 45px; border-radius: 10%; position: relative;">
      </a>

      <!-- All Users List -->
      <li class="nav-item d-none d-lg-block">
        <a href="#" class="nav-link" title="">
          Flex?
        </a>
      </li>

      <!-- Downloadable Forms -->
      <li class="nav-item dropdown">
        <a class="nav-link d-none d-lg-block" data-toggle="dropdown" href="#">
          Downloadable Forms
        </a>
        <a href="#" class="nav-link d-lg-none d-sm-inline-block" data-toggle="dropdown" title="Downloadable Forms">
          <i class="fa fa-folder"></i>
        </a>

        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-header d-lg-none d-sm-inline-block">Downloadable Forms</span>

          {% for form in downloadableforms %}
          <div class="dropdown-divider"></div>
          <a href="{{ form.file.url }}" class="dropdown-item" title="(Last updated on: {{ form.uploaded_on|date:'Y-m-d H:i' }})">
            <i class="fas fa-file mr-2"></i> {{ form.title }}
          </a>
          {% endfor %}
          
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
        </div>
      </li>




      <!-- Org Chart -->
      <li class="nav-item d-none d-lg-block">
        <a href="/orgchart" class="nav-link">
          Org Chart
        </a>
      </li>
      <li class="nav-item d-lg-none d-sm-inline-block">
        <a href="/orgchart" class="nav-link" title="Org Chart">
          <i class="fa fa-users"></i>
        </a>
      </li>

    </ul>

    <!-- SEARCH FORM -->
    <form class="form-inline d-lg-block d-none ml-3" action="{% url 'search' %}" method="get">
      <div class="input-group input-group-sm">
          <input class="form-control form-control-navbar" type="search" name="q" placeholder="Search" aria-label="Announcement Search">
          <div class="input-group-append">
              <button class="btn btn-navbar" type="submit">
                  <i class="fas fa-search"></i>
              </button>
          </div>
      </div>
    </form>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto col-lg-3">
        {% if request.user.is_authenticated %}
            <!-- User is authenticated -->
            <li class="nav-item">
                <a href="{% url 'profile' request.user %}" class="nav-link">Profile</a>
            </li>
            <li class="nav-item">
                <a href="#" onclick="document.getElementById('logout-form').submit()" class="nav-link text-danger">
                    <i class="fa fa-power-off" title="Logout"></i> Logout
                </a>
                <form id="logout-form" action="{% url 'logout' %}" method="post" style="display: none;">
                    {% csrf_token %}
                </form>
            </li>
        {% else %}
            <!-- User is not authenticated -->
            <li class="nav-item d-none d-lg-block">
                <form class="form-inline" action="{% url 'login' %}" method="post">
                    {% csrf_token %}
                    <div class="input-group">
                        <input type="text" name="username" class="form-control" placeholder="Username" required>
                        <input type="password" name="password" class="form-control" placeholder="Password" required>
                        <div class="input-group-append">
                            <button type="submit" class="btn btn-primary">Login</button>
                        </div>
                    </div>
                </form>
            </li>
            <li class="nav-item d-lg-none d-sm-inline-block">
              <a href="/login" class="nav-link" title="Sign In">
                <i class="fa fa-key"></i>
              </a>
            </li>
            <li class="nav-item d-none d-lg-block">
              <a href="/register" class="nav-link">Register</a>
            </li>
            <li class="nav-item d-lg-none d-sm-inline-block">
              <a href="/register" class="nav-link" title="Sign-up">
                <i class="fa fa-edit"></i>
              </a>
            </li>
        {% endif %}
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-light" style="opacity: .85;">
    <!-- Control sidebar content goes here -->
    <div class="p-3">
      <!-- User type indicator -->
      <div>
        {% if request.user.is_authenticated %}
          {% if request.user.is_superuser %}
          <h6 class="text-center bg-success">
            <strong><i class="fa fa-crown"></i> Super User <i class="fa fa-crown"></i></strong>
          </h6>
          {% elif request.user.is_staff %}
            <h6 class="text-center bg-warning">
              <strong><i class="fa fa-user-tie"></i> Staff <i class="fa user-group-crown"></i></strong>
            </h6>
          {% else %}
            <h6 class="text-center bg-gray">
              <strong> Normal User</strong>
            </h6>
          {% endif %}


        
          <h6>User Groups:</h6>
          <ul>
              {% for group in request.user.groups.all %}
                  <li>{{ group.name }}</li>
              {% empty %}
                  <li>No groups assigned.</li>
              {% endfor %}
          </ul>

          <div class="float-right">
            <ul>
                {% if user.is_superuser %}
                  <li>
                    <a href="{% url 'create-announcement' %}" class="nav-link" title="Admin UI">
                      <small> <i class="fa fa-plus"></i> New Announcement</small>
                    </a>
                  </li>

                  <li class="">
                    <a href="/admin" class="nav-link" title="Admin UI">
                      Admin
                    </a>
                  </li>
                {% endif %}

                <!-- logout button (no-confirm logout) -->
                  <li>
                    <a href="#" onclick="document.getElementById('logout-form').submit()" class="nav-link text-danger">
                      <i class="fa fa-power-off" title="Logout"></i> Logout
                    </a>
                  </li>
                  <form id="logout-form" action="{% url 'logout' %}" method="post" style="display: none;">
                    {% csrf_token %}
                  </form>
                </li>
            </ul>
          </div>




        {% else %}
            <p>Please <a href="/login">log in.</a></p>
        {% endif %}
      </div>

      
    </div>
  </aside>
  <!-- /.control-sidebar -->

